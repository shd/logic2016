\documentclass[11pt,a4paper,oneside]{article}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amssymb}
%\usepackage{amsmath}
%\usepackage{mathabx}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{bnf}
\newcommand{\lit}[1]{\mbox{`\texttt{#1}'}}
\newcommand{\ntm}[1]{<\mbox{#1}>}
\begin{document}


%\title{Домашние задания по курсу <<Математическая логика>>}
%\author{Andrew Roberts}
%\date{ИТМО, группы 2536-2539, осень 2015 г.}
%\maketitle
\begin{center}
\begin{Large}{\bfseries Домашние задания по курсу <<Математическая логика>>}\end{Large}\\
\vspace{1mm}
\begin{small} ИТМО, группы M3236..M3239\end{small}\\
\small Осень 2016 г.
\end{center}

%\renewcommand{\abstractname}{Общие замечания}
%\begin{abstract}
\subsection*{Общие замечания}
Для всех программ кодировка входных и выходных файлов должна быть либо CP1251,
либо UTF8. 
%\end{abstract}

\subsection*{Задача 1. Проверка вывода}
Написать программу, проверяющую вывод $\gamma_1, \dots \gamma_n \vdash \alpha$ в исчислении высказываний на 
корректность. Входной файл соответствует следующей грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{файл} &::=& \ntm{заголовок} \lit{\textbackslash{}n} \{ \ntm{выражение} \lit{\textbackslash{}n} \}^*\\
\ntm{заголовок} &::=& \left[\ntm{выражение} \left\{ \lit{,}\ntm{выражение}\right\}^*\right] \lit{|-} \ntm{выражение}\\
\ntm{выражение} &::=& \ntm{дизъюнкция} | \ntm{дизъюнкция} \lit{->} \ntm{выражение}\\
\ntm{дизъюнкция} &::=& \ntm{конъюнкция} | \ntm{дизъюнкция} \lit{|} \ntm{конъюнкция}\\
\ntm{конъюнкция} &::=& \ntm{отрицание} | \ntm{конъюнкция} \lit{\&} \ntm{отрицание}\\
\ntm{отрицание} &::=& (\lit{A} \dots \lit{Z}) \{\lit{A}\dots\lit{Z}|\lit{0}\dots\lit{9}\}^* | \lit{!} \ntm{отрицание} | \lit{(} \ntm{выражение} \lit{)}
\end{eqnarray*}\end{bnf}%

В первой строке входного файла (заголовок) перечислены предположения $\gamma_i$ (этот список может быть пустым) и 
доказываемое утверждение $\alpha$. В последующих строках указаны формулы, составляющие вывод формулы $\alpha$.
Пробелы, символы табуляции и возврата каретки (ASCII-код $13_{10}$) должны игнорироваться. 
Символ `\texttt{|}' имеет ASCII-код $124_{10}$.

Результатом работы программы должен быть файл с проаннотированным текстом доказательства,
в котором первая строка --- это заголовок из входного файла, каждая же последующая строка ---
соответствующая строка из вывода, расширенная в соответствии с грамматикой:
\begin{bnf}\begin{eqnarray*}
\ntm{строка} &::=& \lit{(} \ntm{номер} \lit{) } \ntm{выражение} \lit{ (} \ntm{аннотация} \lit{)}\\
\ntm{аннотация} &::=& \lit{Сх. акс. } \ntm{номер} \\
		&|& \lit{Предп. } \ntm{номер}\\
                &|& \lit{M.P. } \ntm{номер}\lit{, }\ntm{номер}\\
                &|& \lit{Не доказано}\\
\ntm{номер} &::=& \{\lit{0}\dots\lit{9}\}^+
\end{eqnarray*}\end{bnf}%

Выражение не должно содержать пробелов, номер от выражения и выражение от аннотации должны
отделяться одним пробелом. Выражения в доказательстве должны нумероваться подряд
натуральными числами с 1. Если выражение $\delta_n$ получено из 
$\delta_i$ и $\delta_j$, где $\delta_j \equiv \delta_i\rightarrow\delta_n$
путём применения правила Modus Ponens, то аннотация должна выглядеть как 
\lit{M.P. $i$, $j$}, обратный порядок номеров не допускается.

Уделите внимание производительности: ваша программа должна проверять доказательство в 
5000 выражений (общим объемом $1$Мб) на Intel Core i5-2520M ($2.5$ GHz) за несколько секунд.


\end{document}
