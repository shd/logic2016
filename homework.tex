\documentclass[11pt,a4paper,oneside]{article}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amssymb}
%\usepackage{amsmath}
%\usepackage{mathabx}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{bnf}
\newcommand{\lit}[1]{\mbox{`\texttt{#1}'}}
\newcommand{\ntm}[1]{<\mbox{#1}>}
\begin{document}


%\title{Домашние задания по курсу <<Математическая логика>>}
%\author{Andrew Roberts}
%\date{ИТМО, группы 2536-2539, осень 2015 г.}
%\maketitle
\begin{center}
\begin{Large}{\bfseries Домашние задания по курсу <<Математическая логика>>}\end{Large}\\
\vspace{1mm}
\begin{small} ИТМО, группы M3236..M3239\end{small}\\
\small Осень 2016 г.
\end{center}

%\renewcommand{\abstractname}{Общие замечания}
%\begin{abstract}
\subsection*{Общие замечания}
Для всех программ кодировка входных и выходных файлов должна быть либо CP1251,
либо UTF8. 
%\end{abstract}

\subsection*{Задача 1. Проверка вывода}
Написать программу, проверяющую вывод $\gamma_1, \dots \gamma_n \vdash \alpha$ в исчислении высказываний на 
корректность. Входной файл соответствует следующей грамматике:
\begin{bnf}\begin{eqnarray*}
\ntm{файл} &::=& \ntm{заголовок} \lit{\textbackslash{}n} \{ \ntm{выражение} \lit{\textbackslash{}n} \}^*\\
\ntm{заголовок} &::=& \left[\ntm{выражение} \left\{ \lit{,}\ntm{выражение}\right\}^*\right] \lit{|-} \ntm{выражение}\\
\ntm{выражение} &::=& \ntm{дизъюнкция} | \ntm{дизъюнкция} \lit{->} \ntm{выражение}\\
\ntm{дизъюнкция} &::=& \ntm{конъюнкция} | \ntm{дизъюнкция} \lit{|} \ntm{конъюнкция}\\
\ntm{конъюнкция} &::=& \ntm{отрицание} | \ntm{конъюнкция} \lit{\&} \ntm{отрицание}\\
\ntm{отрицание} &::=& (\lit{A} \dots \lit{Z}) \{\lit{A}\dots\lit{Z}|\lit{0}\dots\lit{9}\}^* | \lit{!} \ntm{отрицание} | \lit{(} \ntm{выражение} \lit{)}
\end{eqnarray*}\end{bnf}%

В первой строке входного файла (заголовок) перечислены предположения $\gamma_i$ (этот список может быть пустым) и 
доказываемое утверждение $\alpha$. В последующих строках указаны формулы, составляющие вывод формулы $\alpha$.
Пробелы, символы табуляции и возврата каретки (ASCII-код $13_{10}$) должны игнорироваться. 
Символ `\texttt{|}' имеет ASCII-код $124_{10}$.

Результатом работы программы должен быть файл с проаннотированным текстом доказательства,
в котором первая строка --- это заголовок из входного файла, каждая же последующая строка ---
соответствующая строка из вывода, расширенная в соответствии с грамматикой:
\begin{bnf}\begin{eqnarray*}
\ntm{строка} &::=& \lit{(} \ntm{номер} \lit{) } \ntm{выражение} \lit{ (} \ntm{аннотация} \lit{)}\\
\ntm{аннотация} &::=& \lit{Сх. акс. } \ntm{номер} \\
		&|& \lit{Предп. } \ntm{номер}\\
                &|& \lit{M.P. } \ntm{номер}\lit{, }\ntm{номер}\\
                &|& \lit{Не доказано}\\
\ntm{номер} &::=& \{\lit{0}\dots\lit{9}\}^+
\end{eqnarray*}\end{bnf}%

Выражение не должно содержать пробелов, номер от выражения и выражение от аннотации должны
отделяться одним пробелом. Выражения в доказательстве должны нумероваться подряд
натуральными числами с 1. Если выражение $\delta_n$ получено из 
$\delta_i$ и $\delta_j$, где $\delta_j \equiv \delta_i\rightarrow\delta_n$
путём применения правила Modus Ponens, то аннотация должна выглядеть как 
\lit{M.P. $i$, $j$}, обратный порядок номеров не допускается.

Уделите внимание производительности: ваша программа должна проверять доказательство в 
5000 выражений (общим объемом $1$Мб) на Intel Core i5-2520M ($2.5$ GHz) за несколько секунд.

\subsection*{Задача 2. Исчисление предикатов}
Написать программу, проверяющую доказательство в формальной арифметике на корректность,
а также преобразующую вывод $\Gamma, \alpha \vdash \beta$ в вывод 
$\Gamma \vdash \alpha \rightarrow \beta$

Грамматика входного файла:
\begin{bnf}\begin{eqnarray*}
\ntm{Файл} &::=& \ntm{заголовок} \lit{\textbackslash{}n} \ntm{доказательство}\\
\ntm{заголовок} &::=& [\{\ntm{выражение}\lit{,}\}^* \ntm{выражение}] \lit{|-} \ntm{выражение}\\
\ntm{доказательство} &::=& \{\ntm{выражение}\lit{\textbackslash{}n}\}^*\\
\ntm{выражение} &::=& \ntm{дизъюнкция} | \ntm{дизъюнкция} \lit{->} \ntm{выражение}\\
\ntm{дизъюнкция} &::=& \ntm{конъюнкция} | \ntm{дизъюнкция} \lit{|} \ntm{конъюнкция}\\
\ntm{конъюнкция} &::=& \ntm{унарное} | \ntm{конъюнкция} \lit{\&} \ntm{унарное}\\
\ntm{унарное} &::=& \ntm{предикат} | \lit{!} \ntm{унарное} | \lit{(} \ntm{выражение} \lit{)}\\
               &|& (\lit{@}|\lit{?}) \ntm{переменная} \ntm{унарное}\\
\ntm{переменная} &::=& (\lit{a} \dots \lit{z}) \{\lit{0}\dots\lit{9}\}^*\\
\ntm{предикат} &::=& (\lit{A} \dots \lit{Z}) \{\lit{0}\dots\lit{9}\}^* [ \lit{(} {\ntm{терм} \{ \lit{,} \ntm{терм} \}^*} \lit{)} ]\\
             &|& \ntm{терм} \lit{=} \ntm{терм}\\
\ntm{терм}   &::=& \ntm{слагаемое} | \ntm{терм} \lit{+} \ntm{слагаемое}\\
\ntm{слагаемое} &::=& \ntm{умножаемое} | \ntm{слагаемое} \lit{*} \ntm{умножаемое}\\
\ntm{умножаемое} &::=& (\lit{a} \dots \lit{z}) \{\lit{0}\dots\lit{9}\}^*  \lit{(} {\ntm{терм} \{ \lit{,} \ntm{терм} \}^*} \lit{)} \\
             &|& \ntm{переменная} | \lit{(} \ntm{терм} \lit{)}\\
             &|& \lit{0} | \ntm{умножаемое} \lit{'}
\end{eqnarray*}\end{bnf}%

Символ `\texttt{@}' обозначает квантор всеобщности, символ `\texttt{?}' --- квантор существования.
Грамматика не различает переменные и константы;
мы можем предполагать, что константы в формуле --- это свободные переменные.
Переменные нужно разбирать <<жадно>>: например, в выражении \verb!?xxxx=0! указан квантор по 
переменной \verb!xxxx!.

Входной файл может содержать некорректный вывод --- а именно, некоторые переходы
в выводе могут быть некорректными; входной файл по-прежнему синтаксически корректен.
В этом случае программа должна выдать текст
вида: 
\begin{verbatim}
Вывод некорректен начиная с формулы номер <№>[: <ошибка>]
\end{verbatim}
где вместо \texttt{<№>} подставлен номер первой некорректной формулы. Необязательное поле
\texttt{<ошибка>} должно появляться, если формула не является аксиомой или допущением,
не может быть выведена из предыдущих, но являлась бы (или могла бы быть выведена), 
если бы не нарушение ограничений на переменные. Возможные варианты ошибок:
\begin{verbatim}
терм <X> не свободен для подстановки в формулу <Y> вместо переменной <a>.

переменная <a> входит свободно в формулу <X>.

используется правило с квантором по переменной <a>, 
входящей свободно в допущение <X>.
\end{verbatim}

Выходной файл --- либо измененное доказательство утверждения $\Gamma \vdash \alpha \rightarrow \beta$,
при этом вывод должен соответствовать грамматике для ввода, либо сообщение об ошибке.
Если в заголовке доказательства отсутствуют гипотезы, то требуется выдать исходное доказательство.

\subsection*{Задача 3. Неравенства}
Написать программу, по двум целым числам $a$ и $b$ ($0 \le a,b \le 100$), указанным во входном файле,
строящую доказательство:

\begin{itemize}
\item Для групп 38-39: $\overline{\vphantom{b}a} \le \overline{b}$ или 
$\neg\overline{\vphantom{b}a} \le \overline{b}$, в зависимости от соотношения $a$ и $b$ (знак 
<<меньше или равно>> раскрывается естественно --- как $\exists p (a+p = b)$).

\item Для групп 36-37: $(\overline{\vphantom{1}a}+\overline{1})\cdot (\overline{\vphantom{1}a}+\overline{1}) 
 = \overline{\vphantom{1}a}\cdot\overline{\vphantom{1}a} + 2\cdot \overline{\vphantom{1}a} + \overline{1}$
\end{itemize}

Доказательство должно быть записано в соответствии с грамматикой выходного файла из задачи 2.

\end{document}
